
# Rota Cultural - Projeto Final de Ciclo (Alpha EdTech)

[![Visite o Projeto](https://img.shields.io/badge/Visitar%20Projeto-Live%20Demo-blue?style=for-the-badge&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+Um90YSBDdWx0dXJhbCBJY29uPC90aXRsZT4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIwLjAwMDAwMCwgLTIwLjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMDAwMDAwLCAyMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMxQjFCMUMiIGN4PSI0MCIgY3k9IjQwIiByPSI0MCI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzEuNDgzMjQ5Nyw1Ny4wMDkzMzgxIEMzNC4zMjEzMTYxLDU4LjQzMTA3MTUgMzcuNTY3MzUxNiw1OS4yMDkyMTAzIDQxLjAwMDI4MjIsNTkuMjA5MjEwMyBDNDcuNTU1MzU3NSw1OS4yMDkyMTAzIDUzLjE3MDkyODYsNTUuMzEyMTQyNSA1My4xNzA5Mjg2LDQ4LjQ3ODMzMjggQzUzLjE3MDkyODYsNDUuOTEyMTIyNSA1MS44NDMwMTYxLDQzLjcxMDU5OTYgNTAuMDgyNzI1OCw0Mi4wNDM1ODk3IEw0MS4wMDAyODIyLDQ4LjQ3ODMzMjggTDMxLjQ4MzI0OTcsNTcuMDA5MzM4MSBaIiBpZD0iUGF0aCIgZmlsbD0iIzgwMDBGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUwLjEyODQ4MTIsMzguMTEzNzQxOSBDNDcuOTc0MjE4MSwzNi41MTAyODIxIDQ0LjYxMjIxMjMsMzUuNDA2NTA2IDQwLjk5OTcyNzgsMzUuNDA2NTA2IEMzNC41NTY5NjQzLDM1LjQwNjUwNiAyOC44MzA3MTQ0LDM5LjQzMjU3NzYgMjguODMwNzE0NCw0Ni4xNTU2NDczIEMyOC44MzA3MTQ0LDQ4LjgyMjcwNTcgMzAuMjQ0MzA0NCw1MC45OTkzOTkgMzIuMDkyMTU0NCw1Mi41OTA3MjQyIEw0MC45OTk3Mjc4LDQ2LjE1NTY0NzMgTDUwLjEyODQ4MTIsMzguMTEzNzQxOSBaIiBpZD0iUGF0aCIgZmlsbD0iIzQzOUVGRSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTQwLjk5OTcyNzgsMzUuMzcxOTUxOSBDNDAuOTk5NzI3OCwyMS41Mjg3NjM0IDUwLjM1NDI3NjEsMjAuNzk1NjQxNiA1MC4zNTQyNzYxLDIwLjc5NTY0MTYgQzUwLjM1NDI3NjEsMjAuNzk1NjQxNiA1MC4wMjQxMjg2LDI0LjgyNDM0NDEgNDAuOTk5NzI3OCwzNS4zNzE5NTE5IFoiIGlkPSJQYXRoLTIiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+)](https://equipe01.alphaedtech.org.br/)

## üìú Descri√ß√£o

**Rota Cultural** √© uma plataforma web projetada para conectar pessoas a eventos culturais em sua cidade. Usu√°rios podem descobrir, visualizar detalhes, favoritar e participar de eventos. Usu√°rios com perfil *Premium* ou *Administrador* podem criar e gerenciar seus pr√≥prios eventos, al√©m de criar promo√ß√µes exclusivas atrav√©s de QR Codes. O projeto utiliza uma arquitetura Full Stack com backend em Node.js/Express, frontend em JavaScript puro e banco de dados PostgreSQL.

## ‚ú® Funcionalidades Principais

* **Autentica√ß√£o de Usu√°rios:**
    * Cadastro e Login com Email/Senha.
    * Autentica√ß√£o via Google OAuth2.
    * Fluxo de recupera√ß√£o de senha por email.
    * Onboarding para novos usu√°rios (coleta de informa√ß√µes adicionais).
* **Gerenciamento de Eventos:**
    * Listagem de eventos com filtros (categoria, data, busca textual).
    * Visualiza√ß√£o detalhada de eventos (descri√ß√£o, data, hora, local, criador, v√≠deos, mapa).
    * Cria√ß√£o, Edi√ß√£o e Exclus√£o de eventos (requer permiss√£o Premium/Admin).
    * Sistema de "Likes" para eventos.
* **Perfis de Usu√°rio:**
    * Visualiza√ß√£o e Edi√ß√£o de informa√ß√µes b√°sicas do perfil (nome, telefone, data de nascimento).
    * Diferencia√ß√£o de pap√©is (Usu√°rio Comum, Premium, Admin).
* **Promo√ß√µes e QR Codes (Premium/Admin):**
    * Cria√ß√£o de promo√ß√µes associadas a eventos (descontos, brindes, etc.).
    * Gera√ß√£o de QR Codes √∫nicos para usu√°rios utilizarem as promo√ß√µes.
    * Visualiza√ß√£o e gerenciamento das promo√ß√µes criadas.
    * Valida√ß√£o de QR Codes (via c√¢mera ou inser√ß√£o manual) para registrar o uso.
* **Integra√ß√µes:**
    * **Google Maps:** Exibi√ß√£o de localiza√ß√£o de eventos em mapa interativo, autocomplete de endere√ßos.
    * **AWS S3:** Armazenamento de imagens de eventos.
    * **Nodemailer:** Envio de emails (ex: recupera√ß√£o de senha).
* **Outros:**
    * API documentada com Swagger (`/api-docs`).
    * Frontend responsivo (layout se adapta a diferentes tamanhos de tela).
    * Sistema de navega√ß√£o SPA (Single Page Application) baseado em hash.

## üíª Tecnologias Utilizadas

* **Backend:**
    * Node.js
    * Express.js
    * PostgreSQL (`pg`)
    * Passport.js (Estrat√©gias: Local, Google OAuth2)
    * JSON Web Tokens (JWT) para gerenciamento de sess√£o via cookies HttpOnly
    * Bcrypt.js (Hashing de senhas)
    * Nodemailer (Envio de emails)
    * AWS SDK v3 (`@aws-sdk/client-s3`) para interagir com S3
    * Multer (Middleware para upload de arquivos)
    * `dotenv` (Gerenciamento de vari√°veis de ambiente)
    * Swagger UI Express & YAML (`swagger-ui-express`, `yaml`) para documenta√ß√£o da API
    * `uuid` (Gera√ß√£o de IDs √∫nicos para QR Codes/Promo√ß√µes)
* **Frontend:**
    * HTML5
    * CSS3 (Estrutura modular)
    * JavaScript (Vanilla JS, ES Modules)
    * Roteamento SPA (baseado em Hash `#`)
    * Google Maps JavaScript API (Mapas, Places Autocomplete)
    * `jsQR` (Biblioteca para leitura de QR Code via c√¢mera)
* **Banco de Dados:**
    * PostgreSQL
* **Infraestrutura & Servi√ßos:**
    * AWS S3 (Armazenamento de imagens)

## üöÄ Pr√©-requisitos

Antes de come√ßar, certifique-se de ter instalado:

* [Node.js](https://nodejs.org/) (Vers√£o >= 18.x recomendada, baseada nas depend√™ncias AWS SDK v3)
* [npm](https://www.npmjs.com/) (geralmente vem com o Node.js) ou [Yarn](https://yarnpkg.com/)
* Um servidor PostgreSQL em execu√ß√£o.
* Credenciais da AWS (Access Key ID, Secret Access Key) e um bucket S3 configurado com permiss√µes adequadas.
* Credenciais do Google Cloud para OAuth2 (Client ID, Client Secret) e API Key do Google Maps (com as APIs Maps JavaScript e Places habilitadas).
* Credenciais para um servi√ßo de envio de email (ex: Gmail, SendGrid) compat√≠vel com Nodemailer.

## ‚öôÔ∏è Instala√ß√£o e Configura√ß√£o

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone [https://github.com/rafa-arati/Projeto-Final-de-Ciclo---Alpha-Edtech.git](https://github.com/rafa-arati/Projeto-Final-de-Ciclo---Alpha-Edtech.git)
    cd Projeto-Final-de-Ciclo---Alpha-Edtech
    ```

2.  **Instale as depend√™ncias do backend:**
    ```bash
    npm install
    # ou
    # yarn install
    ```
    *(N√£o h√° `package.json` na pasta `frontend`, as depend√™ncias s√£o carregadas via CDN ou s√£o nativas do navegador)*

3.  **Configure o Banco de Dados PostgreSQL:**
    * Crie um banco de dados para o projeto (ex: `rotacultural_db`).
    * Execute o script SQL para criar as tabelas e inserir dados iniciais:
        ```bash
        # Conecte-se ao seu servidor PostgreSQL (ex: usando psql)
        psql -U <seu_usuario_postgres> -d <nome_do_seu_banco> -f backend/scripts/new_database.sql
        ```
        **Aten√ß√£o:** O script `new_database.sql` apaga todas as tabelas existentes antes de criar as novas. Use com cuidado!

4.  **Configure as Vari√°veis de Ambiente:**
    * Crie um arquivo `.env` na raiz do diret√≥rio `backend`.
    * Copie o conte√∫do abaixo e preencha com suas credenciais:

    ```dotenv
    # Configura√ß√µes do Banco de Dados
    DB_HOST=localhost
    DB_PORT=5432
    DB_USER=<SEU_USUARIO_POSTGRES>
    DB_PASSWORD=<SUA_SENHA_POSTGRES>
    DB_NAME=<NOME_DO_SEU_BANCO>

    # Segredos da Aplica√ß√£o
    JWT_SECRET=<SEU_SEGREDO_JWT_FORTE>
    SESSION_SECRET=<SEU_SEGREDO_DE_SESSAO_FORTE>
    TOKEN_EXPIRY_HOURS=1 # Tempo de expira√ß√£o do token de reset de senha

    # Configura√ß√µes do Google OAuth2
    GOOGLE_CLIENT_ID=<SEU_GOOGLE_CLIENT_ID>
    GOOGLE_CLIENT_SECRET=<SEU_GOOGLE_CLIENT_SECRET>
    GOOGLE_CALLBACK_URL=http://localhost:3000/api/auth/google/callback # Ou URL de produ√ß√£o/ngrok

    # Configura√ß√µes da AWS S3
    AWS_REGION=<SUA_REGIAO_AWS> # ex: us-east-1
    AWS_S3_BUCKET_NAME=<NOME_DO_SEU_BUCKET_S3>
    AWS_ACCESS_KEY_ID=<SUA_AWS_ACCESS_KEY_ID>
    AWS_SECRET_ACCESS_KEY=<SUA_AWS_SECRET_ACCESS_KEY>

    # Configura√ß√µes de Email (Nodemailer)
    EMAIL_HOST=<SEU_SERVIDOR_SMTP>
    EMAIL_PORT=587 # Ou 465 para SSL
    EMAIL_USER=<SEU_USUARIO_EMAIL>
    EMAIL_PASS=<SUA_SENHA_EMAIL_OU_APP_PASSWORD>
    EMAIL_FROM="Rota Cultural <no-reply@exemplo.com>" # Email remetente

    # Configura√ß√µes Google Maps API
    Maps_API_KEY=<SUA_CHAVE_API_Maps>

    # URL do Frontend (para links de email)
    FRONTEND_URL=http://localhost:3000/

    # Porta do Servidor
    PORT=3000

    # Seguran√ßa (Opcional - valores padr√£o mostrados)
    # RESET_RATE_LIMIT_WINDOW_MS=3600000 # 1 hora
    # RESET_RATE_LIMIT_MAX=5
    # PASSWORD_SALT_ROUNDS=10
    ```

## ‚ñ∂Ô∏è Executando a Aplica√ß√£o

1.  **Inicie o servidor backend:**
    ```bash
    npm start
    ```
    *(Isso executar√° `node backend/server.js`)*

2.  **Acesse a aplica√ß√£o:**
    Abra seu navegador e v√° para `http://localhost:3000` (ou a porta definida no seu `.env`).

## üìö Documenta√ß√£o da API

A documenta√ß√£o da API est√° dispon√≠vel via Swagger UI. Ap√≥s iniciar o servidor, acesse:
`http://localhost:3000/api-docs`

## üåê Link da Aplica√ß√£o (Deploy)

[https://equipe01.alphaedtech.org.br/](https://equipe01.alphaedtech.org.br/)

## üë• Contribuidores

* **Reposit√≥rio Original:** [rafa-arati/Projeto-Final-de-Ciclo---Alpha-Edtech](https://github.com/rafa-arati/Projeto-Final-de-Ciclo---Alpha-Edtech)
* Equipe 01 - Alpha EdTech

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a **Licen√ßa ISC**. Veja o arquivo `package.json` para mais detalhes.
